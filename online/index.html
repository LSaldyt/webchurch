<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <title>WebChurch</title>
    <link rel="stylesheet" href="../css/codemirror.css">
    <link rel="stylesheet" href="../css/d3.css">
    <script src="store.js"></script>
    <script src="jquery.js"></script>
    <script src="webchurch.js"></script>
    <script>d3 = require('d3')</script>
    <script src="vega.min.js"></script>
    <style>
      body {
        font-family: Helvetica;
        font-size: 120%;
      }

      button {
      /*font-size: 14px*/
      }
      button.reset {
        float: right
      }
      button.run {
      /*padding-top: 5px;
        padding-bottom: 5px;*/
      }
      select {
      /*font-size: 20px;*/
      }
      ul {
        font-size: 12px
      }
      li code {
        border: 1px solid #aaa;
        border-radius: 2px;
        padding: 1px 3px 1px 3px;
        background-color: #dfdfdf
      }
      li {
        padding-top: 10px
      }
      p.error {
        font-size: 120%;
      }
      
      .code-controls {
      position: absolute;
      bottom: 0; 
      right: 0;
      opacity: 0;
      z-index: 1000
      }
      
      .code-settings {
      z-index: 999;
      position: absolute;
      top: 0;
      right: 0;
      font-size: 16px;
      list-style-type: none;
      margin: 2px
      }
     
      .code-settings li {
      display: none;
      }

      .code-settings .settings-icon {
      display: inline;
      opacity: 0.3; 
      }

      .code-settings:hover li {
      opacity: 1.0;
      display: inline
      }

      .CodeMirror:hover .code-controls, .CodeMirror-focused .code-controls {
      opacity: 1
      }
      
    </style>
    
  </head>
  <body>
    <h1>WebChurch</h1>

    Keyboard shortcuts:
    <ul>
      <li> <code>Cmd + .</code> or <code>Ctrl + .</code> - Fold selected section (slightly buggy right now)</li>
      <li> <code>Cmd + ;</code> or <code>Ctrl + ;</code> - Comment selection section</li>
    </ul>
    
    
    <pre id="codebox"><code>

(define (reject func p) (lambda () (rejection-query '() (func) (flip p))))

(define (geom p) (if (flip p) 0 (+ 1 (geom p))))

(livehist 100 (reject (lambda () (geom 0.5)) 0.001))

(livedensity 500 (reject gaussian 0.001) "" true)

(livescatter 200 (reject (lambda () (repeat 2 gaussian)) 0.001))
</code>

  </body>
  <script>
    var savedCode = store.get('code');
    var code = savedCode || $("#codebox > code").text();

    var EditorModel = require('./editor').EditorModel;
    var editor = new EditorModel(
    {
    code: code,
    engine: "webchurch",
    }
    );

    editor.replaceDomEl( $("#codebox")[0] )

    editor.on('run.start', function() {
    store.set('code', this.get('code'));
    })

  </script>
</html>
